<section class="main__header">
    <div class="main__content">
        <h2>Productos</h2>
        <p>Administración de productos</p>
    </div>
</section>
<section class="main__body">
    <section>
        <section class="wrapper">
            <div class="panel-info">
                <a href="/product/all" class="panel-info__item panel-info__item--link">
                    <iconify-icon icon="tabler:perfume"></iconify-icon>
                    <div>
                        <p class="panel-info__label">Total de productos</p>
                        <p class="panel-info__value">
                            <%= data.counters.totalProducts %>
                        </p>
                    </div>
                </a>
                <a href="/product/all?status=active" class="panel-info__item panel-info__item--link">
                    <iconify-icon icon="tabler:circle-check"></iconify-icon>
                    <div>
                        <p class="panel-info__label">Activos</p>
                        <p class="panel-info__value">
                            <%= data.counters.totalActiveProducts %>
                        </p>
                    </div>
                </a>
                <a href="/product/all?stock=<%= data.lowStock %>" class="panel-info__item panel-info__item--link">
                    <iconify-icon icon="tabler:alert-triangle"></iconify-icon>
                    <div>
                        <p class="panel-info__label">Poco stock <small>(menos de <%= data.lowStock %>)</small> </p>
                        <p class="panel-info__value">
                            <%= data.counters.lowStockProducts %>
                        </p>
                    </div>
                </a>
                <div class="panel-info__btn-container">
                    <button id="btn-filters" class="btn" type="button">
                        <iconify-icon icon="tabler:filter"></iconify-icon>
                        <span>Filtros</span>
                    </button>
                    <button id="btn-actions" class="btn" type="button">
                        <iconify-icon icon="tabler:apps"></iconify-icon>
                        <span>Acciones</span>
                    </button>
                    <a href="/product/new" class="btn btn--green">
                        <iconify-icon icon="tabler:circle-plus"></iconify-icon>
                        <span>Nuevo producto</span>
                    </a>
                </div>
            </div>
        </section>
    
        <section id="section-filters" class="wrapper dropdown  <% if (Object.keys(data.filter) != 0) { %> dropdown--active <% } %>">
            <div class="wrapper__header wrapper__header--with-badge">
                <h2 class="wrapper__subtitle">Filtros</h2>
                <div class="wrapper__btn-container">
                    <button class="btn btn--gray" type="button" id="btn-filters-clear">
                        <iconify-icon icon="tabler:ban"></iconify-icon>
                        <span>Limpiar</span>
                    </button>
                    <button class="btn btn--green" type="submit" form="form-filters">
                        <iconify-icon icon="tabler:circle-check"></iconify-icon>
                        <span>Aplicar</span>
                    </button>
                </div>
            </div>
            <form id="form-filters" class="wrapper__body">
                <div class="wrapper__row wrapper__row--auto">
                    <div class="wrapper__row wrapper__row--4">
                        <label for="product_stock" class="label">
                            <span>Stock</span>
                            <input class="input-text" type="number" name="stock" value="<%= data.filter.stock %>">
                        </label>
                        <label for="product_gender" class="label">
                            <span>Genero</span>
                            <select name="gender" class="input-select">
                                <option value="none" <% if (data.filter.gender == null) { %> selected <% } %>>Seleccionar</option>
                                <option value="Masculino" <% if (data.filter.gender == 'Masculino') { %> selected <% } %>>Masculino</option>
                                <option value="Femenino" <% if (data.filter.gender == 'Femenino') { %> selected <% } %>>Femenino</option>
                                <option value="Unisex" <% if (data.filter.gender == 'Unisex') { %> selected <% } %>>Unisex</option>
                                <option value="Fragancias" <% if (data.filter.gender == 'Fragancias') { %> selected <% } %>>Fragancias</option>
                            </select>
                        </label>
                        <label for="type" class="label">
                            <span>Tipo</span>
                            <select name="type" class="input-select">
                                <option value="none" <% if (data.filter.type == null) { %> selected <% } %>>Seleccionar</option>
                                <option value="Eau de Parfum" <% if (data.filter.type == 'Eau de Parfum') { %> selected <% } %>>Eau de Parfum</option>
                                <option value="Eau de Toilette" <% if (data.filter.type == 'Eau de Toilette') { %> selected <% } %>>Eau de Toilette</option>
                                <option value="Desodorante" <% if (data.filter.type == 'Desodorante') { %> selected <% } %>>Desodorante</option>
                                <option value="After Shave" <% if (data.filter.type == 'After Shave') { %> selected <% } %>>After Shave</option>
                            </select>
                        </label>
                        <div class="wrapper__row ">
                            <label for="filter-status" class="label">
                                <span>Estado</span>
                            </label>
                            <div class="wrapper__row wrapper__row--4">
                                <label for="flag_new" class="label label--checkbox">
                                    <input class="checkbox" type="checkbox" name="new" id="flag_new" <% if (data.filter.new == 'on') { %> checked <% } %>>
                                    <span>Nuevo</span>
                                </label>
                                <label for="flag_promoted" class="label label--checkbox">
                                    <input class="checkbox" type="checkbox" name="promoted" id="flag_promoted" <% if (data.filter.promoted == 'on') { %> checked <% } %>>
                                    <span>Promocional</span>
                                </label>
                                <label for="flag_featured" class="label label--checkbox">
                                    <input class="checkbox" type="checkbox" name="featured" id="flag_featured" <% if (data.filter.featured == 'on') { %> checked <% } %>>
                                    <span>Destacado</span>
                                </label>
                                <label for="flag_topSeller" class="label label--checkbox">
                                    <input class="checkbox" type="checkbox" name="topSeller" id="flag_topSeller" <% if (data.filter.topSeller == 'on') { %> checked <% } %>>
                                    <span>Más vendido</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    <div class="wrapper__row wrapper__row--auto">
                        <label for="product_price_list" class="label">
                            <span>Precio Lista</span>
                            <div class="wrapper__row wrapper__row--auto">
                                <input class="input-text" type="number" name="price_list_min" placeholder="Min" value="<%= data.filter.price_list_min %>">
                                <input class="input-text" type="number" name="price_list_max" placeholder="Max" value="<%= data.filter.price_list_max %>">
                            </div>
                        </label>
                        <label for="product_price_sell" class="label">
                            <span>Precio Venta</span>
                            <div class="wrapper__row wrapper__row--auto">
                                <input class="input-text" type="number" name="price_sell_min" placeholder="Min" value="<%= data.filter.price_sell_min %>">
                                <input class="input-text" type="number" name="price_sell_max" placeholder="Max" value="<%= data.filter.price_sell_max %>">
                            </div>
                        </label>
                        <label for="product_discount" class="label">
                            <span>Descuento</span>
                            <input class="input-text" type="number" name="discount" value="<%= data.filter.discount %>">
                        </label>
                        <label for="payment_id" class="label">
                            <span>Cuotas</span>
                            <select name="payment" class="input-select">
                                <option value="none" <% if (data.filter.payment == null) { %> selected <% } %>>Seleccionar</option>
                                <% data.payments.forEach(payment=> { %>
                                    <option value="<%= payment.payment_id %>" <% if (data.filter.payment == payment.payment_id) { %> selected <% } %>>
                                        <%= payment.payment_quantity %> - <%= payment.payment_interest %>% de interés
                                    </option>
                                    <% }) %>
                            </select>
                        </label>
    
                    </div>
                </div>
    
            </form>
        </section>
    
        <section id="section-actions" class="wrapper dropdown">
            <div class="wrapper__header">
                <h2 class="wrapper__subtitle">Acciones</h2>
            </div>
            <div class="wrapper__body">
                <div class="wrapper__row wrapper__row--auto">
                    <div class="wrapper__row wrapper__row--4">
                        <div class="wrapper__row ">
                            <label for="filter-status" class="label">
                                <span>Estado</span>
                            </label>
                            <div class="wrapper__row wrapper__row--4">
                                <button class="btn btn--green" type="button" id="actionStatusActivate" data-status="1" data-item="product">
                                    <iconify-icon icon="tabler:circle-check"></iconify-icon>
                                    <span>Activar</span>
                                </button>
                                <button class="btn btn--red" type="button" id="actionStatusDeactivate" data-status="0" data-item="product">
                                    <iconify-icon icon="tabler:xbox-x"></iconify-icon>
                                    <span>Desactivar</span>
                                </button>
                            </div>
                        </div>
                        <label for="product_discount" class="label">
                            <span>Descuento</span>
                            <div class="wrapper__row wrapper__row--4">
                                <input class="input-text" type="number" name="product_discount" required>
                                <button class="btn btn--green" id="actionDiscount">
                                    <iconify-icon icon="tabler:circle-check"></iconify-icon>
                                    <span>Aplicar</span>
                                </button>
                            </div>
                        </label>
                        <label for="payment_id" class="label">
                            <span>Cuotas</span>
                            <div class="wrapper__row wrapper__row--4">
                                <select name="payment_id" class="input-select" required>
                                    <% data.payments.forEach(payment=> { %>
                                        <option value="<%= payment.payment_id %>">
                                            <%= payment.payment_quantity %> - <%= payment.payment_interest %>% de interés
                                        </option>
                                        <% }) %>
                                </select>
                                <button class="btn btn--green" id="actionPayment">
                                    <iconify-icon icon="tabler:circle-check"></iconify-icon>
                                    <span>Aplicar</span>
                                </button>
                            </div>
                        </label>
                        <div class="wrapper__row">
                            <label for="filter-status" class="label label--filter">
                                <span>Indicadores</span>
                                <button class="btn btn--green" id="actionFlag">
                                    <iconify-icon icon="tabler:circle-check"></iconify-icon>
                                    <span>Aplicar</span>
                                </button>
                            </label>
                            
                            <div class="wrapper__row wrapper__row--4">
                                <label for="flag_new" class="label label--checkbox">
                                    <input class="checkbox" type="checkbox" name="flag_new" id="flag_new">
                                    <span>Nuevo</span>
                                </label>
                                <label for="flag_promoted" class="label label--checkbox">
                                    <input class="checkbox" type="checkbox" name="flag_promoted" id="flag_promoted">
                                    <span>Promocional</span>
                                </label>
                                <label for="flag_featured" class="label label--checkbox">
                                    <input class="checkbox" type="checkbox" name="flag_featured" id="flag_featured">
                                    <span>Destacado</span>
                                </label>
                                <label for="flag_topSeller" class="label label--checkbox">
                                    <input class="checkbox" type="checkbox" name="flag_topSeller" id="flag_topSeller">
                                    <span>Más vendido</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
    
            </div>
        </section>

    </section>

    <section class="wrapper">
        <div class="wrapper__body">
            <table id="panel-table" class="table">
                <thead class="table__head">
                    <tr class="table__row-head">
                        <th class="table__cell"><input class="checkbox" type="checkbox" name="" id="checkbox-all"></th>
                        <th class="table__cell">Producto</th>
                        <th class="table__cell">Marca</th>
                        <th class="table__cell">SKU</th>
                        <th class="table__cell">Stock</th>
                        <th class="table__cell">Precio</th>
                        <th class="table__cell">Estado</th>
                        <th class="table__cell"></th>
                    </tr>
                </thead>
                <tbody class="table__body">
                    <% data.products.forEach((product)=> { %>
                        <tr class="table__row">
                            <td class="table__cell">
                                <input class="checkbox action-checkbox" type="checkbox" name="<%= product.product_id %>">
                            </td>
                            <td class="table__cell">
                                <a href="/product/<%= product.product_id %>" class="link link--table">
                                    <%= product.product_name %>
                                </a>
                            </td>
                            <td class="table__cell">
                                <a href="/brand/<%= product.brand_id %>" class="link link--table">
                                    <%= product.brand_name %>
                                </a>
                            </td>
                            <td class="table__cell">
                                <%= product.product_sku %>
                            </td>
                            <td class="table__cell">
                                <%= product.product_stock %>
                            </td>
                            <td class="table__cell">$<%= product.product_price_sell %>
                            </td>
                            <td class="table__cell">
                                <% if (product.product_status==true) { %>
                                    <span class="badge badge--green">activo</span>
                                    <% } else { %>
                                        <span class="badge badge--red">inactivo</span>
                                        <% } %>
                            </td>
                            <td class="table__cell">
                                <a href="/product/<%= product.product_id %>/edit" class="btn-table"><iconify-icon
                                        icon="tabler:edit"></iconify-icon></a>
                            </td>
                        </tr>
                        <% }) %>
                </tbody>
            </table>
        </div>
    </section>
</section>